{% set active_page = 'tasks' %}
{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}

<div class="container">
    <br>
    <form action="/api/task/add" method="POST" id="newtask">
        <div class="row g-3">
            <div class="col-sm-7">
                <label for="content" class="form-label">Task</label>
                <input type="text" id="content" class="form-control" name="content">
            </div>
            <div class="col-sm">
                <label for="tag" class="form-label">Tag</label>
                <input list="tag" name="tag" class="form-control">
                <datalist id="tag">
                    <option value=""></option>
                    {% for tag in tags %}
                    <option value="{{ tag.title }}">{{ tag.title }}</option>
                    {% endfor %}
                </datalist>
            </div>
            <div class="col-sm">
                <label class="form-label" for="datepicker">Due Date</label>
                <input type="text" id="datepicker" name="datepicker" class="date form-control" readonly="readonly"
                    placeholder="MM/DD/YYYY" value="">
            </div>
            <div class="col-auto align-self-end ">
                <button type="submit" name="tits" class="btn btn-primary">Add Task</button>
            </div>
        </div>
    </form>
    <br>



    <div class="row">

        {% if tasks|length < 1 %} <h2>There are no Tasks.</h2>
            {% else %}
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col" class="bg-secondary" style="white-space: nowrap; width: 1%;">Tag</th>
                        <th scope="col">Task</th>
                        <th scope="col">Added</th>
                        <th scope="col">Due</th>
                        <th scope="col"></th>

                    </tr>
                </thead>
                <tbody class="table-group-divider">
                    {% for task in tasks %}
                    <tr>
                        <th scope="row" class="bg-secondary" style="white-space: nowrap; width: 1%;">{{ task.tag }}</th>
                        <td>{{ task.content }}</td>
                        <td>{{ task.date_created }}</td>
                        <td>{{ task.date_due }}</td>
                        <td align="right">
                            <a href="/api/task/delete/{{task.id}}"><i class="fa-solid fa-trash-can"></i></a>
                            <a href="/api/task/update/{{task.id}}"><i class="fa-solid fa-pen-to-square"></i></a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}
    </div>

</div>

{% endblock body %}